<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Приложение №1 — График платежей</title>
    <style>
        body{ font-family: "Times New Roman", serif; margin: 24px; color:#111; }
        .doc{ max-width: 820px; margin: 0 auto; line-height: 1.25; font-size: 14px; }
        h1{ font-size: 16px; text-align:center; margin:0 0 8px; }
        .muted{ color:#444; }
        table{ width:100%; border-collapse:collapse; margin-top:10px; }
        th, td{ border:1px solid #333; padding:4px 6px; font-size: 12.5px; }
        th{ background:#f2f2f2; }
        .right{ text-align:right; }
        .sign{ margin-top: 18px; display:flex; gap:40px; }
        .sign .box{ flex:1; }
        .line{ border-bottom: 1px solid #222; margin-top: 26px; }
        .stamp{
          position: fixed;
          right: 60px;
          bottom: 110px;
          width: 180px;
          height: 180px;
          border: 3px solid rgba(180,0,0,.25);
          border-radius: 50%;
          transform: rotate(-12deg);
          opacity: .22;
          display:flex;
          align-items:center;
          justify-content:center;
          text-align:center;
          font-weight:700;
          color: rgba(180,0,0,.9);
          pointer-events:none;
        }
        @media print {
          .no-print{ display:none; }
          body{ margin: 0; }
        }
    </style>
</head>
<body>
<div class="doc">
    <div class="no-print" style="margin-bottom:10px;">
        <a href="javascript:window.print()">Печать</a>
    </div>

    <h1>Приложение №1</h1>
    <h1>График лизинговых платежей к Договору № <span th:text="${contract.contractNumber}"></span></h1>

    <div class="muted">
        Клиент: <b th:text="${app.client != null ? app.client.name : '—'}"></b><br/>
        Предмет лизинга: <b th:text="${app.asset != null ? app.asset.name : '—'}"></b><br/>
        Срок: <b th:text="${contract.termMonths}"></b> мес. · Ставка: <b th:text="${contract.annualRatePercent}"></b>% · Дата начала: <b th:text="${contract.startDate}"></b>
    </div>

    <table>
        <thead>
        <tr>
            <th style="width:44px;">№</th>
            <th style="width:86px;">Дата</th>
            <th class="right">Платёж</th>
            <th class="right">Проценты</th>
            <th class="right">Тело</th>
            <th class="right">Остаток</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="r : ${schedule}">
            <td th:text="${r.paymentNo}"></td>
            <td th:text="${#temporals.format(r.dueDate, 'dd.MM.yyyy')}"></td>
            <td class="right" th:text="${r.paymentTotal}"></td>
            <td class="right" th:text="${r.paymentInterest}"></td>
            <td class="right" th:text="${r.paymentPrincipal}"></td>
            <td class="right" th:text="${r.balanceAfter}"></td>
        </tr>
        </tbody>

        <tfoot>
        <tr>
            <th colspan="2" class="right">Итого:</th>
            <th class="right" th:text="${totalPayments}">0</th>
            <th class="right" th:text="${totalInterest}">0</th>
            <th class="right" th:text="${totalPrincipal}">0</th>
            <th></th>
        </tr>
        </tfoot>
    </table>

    <div class="sign">
        <div class="box">
            <b>Лизингодатель</b><br/>
            ООО «Banking»<br/>
            <div class="line"></div>
            <div class="muted">Подпись / ФИО</div>
        </div>

        <div class="box">
            <b>Лизингополучатель</b><br/>
            <span th:text="${app.client != null ? app.client.name : '—'}"></span><br/>
            <div class="line"></div>
            <div class="muted">Подпись / ФИО</div>
        </div>
    </div>
</div>

<div class="stamp">
    ПЕЧАТЬ<br/>ООО «Banking»
</div>
</body>
</html>
