<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title th:text="${'Договор ' + contract.contractNumber}">Договор</title>
    <style>
        @page { size: A4; margin: 18mm; }
        body { font-family: Arial, sans-serif; color: #111; }
        h1, h2, h3 { margin: 0 0 10px; }
        .row { display:flex; justify-content:space-between; gap: 12px; }
        .muted { color:#555; }
        .section { margin-top: 14px; }
        table { width:100%; border-collapse: collapse; margin-top: 12px; }
        th, td { border:1px solid #ccc; padding:6px 8px; font-size: 12px; }
        th { background: #f2f2f2; text-align:left; }
        .sign { margin-top: 22px; display:flex; justify-content:space-between; gap: 24px; }
        .sign .line { width: 45%; }
        .sign .line div { border-top: 1px solid #999; margin-top: 28px; padding-top: 6px; font-size: 12px; color:#444; }
        .no-print { margin-top: 14px; }
        @media print { .no-print { display:none; } }
        .stamp {
position: fixed;
right: 22mm;
bottom: 30mm;
width: 45mm;
height: 45mm;
opacity: .18;
}
    </style>
</head>
<body>

<div class="row">
    <div>
        <h1 th:text="${'ДОГОВОР № ' + contract.contractNumber}">ДОГОВОР</h1>
        <div class="muted">
            Дата: <span th:text="${contract.contractDate}"></span>
        </div>
    </div>
    <div class="muted" style="text-align:right;">
        Banking · Internal
    </div>
</div>

<div class="section">
    <h3>Основание</h3>
    <div>
        Заявка: <b><span th:text="${app.applicationNumber}"></span></b>
    </div>
</div>

<div class="section">
    <h3>Стороны</h3>

    <div style="margin-top:6px;">
        <b>Лизингодатель:</b> ООО «Banking», именуемое в дальнейшем «Лизингодатель»,
        в лице <span th:text="${companySignerName}">Иванов И.И.</span>,
        действующего на основании <span th:text="${companySignerBasis}">Устава</span>.
    </div>

    <div style="margin-top:6px;">
        <b>Лизингополучатель:</b>
        <span th:text="${app.client != null ? app.client.name : ''}">Клиент</span>,
        именуемый(ая/ое) в дальнейшем «Лизингополучатель».
    </div>
</div>

<div class="section">
    <h3>Предмет договора</h3>
    <div>
        Лизингодатель передаёт, а Лизингополучатель принимает в лизинг имущество:
        <b><span th:text="${app.asset != null ? app.asset.name : ''}">Объект</span></b>.
    </div>
</div>


<div class="section">
    <h3>Условия</h3>
    <div><b>Сумма финансирования:</b> <span th:text="${contract.financedAmount}"></span></div>
    <div><b>Срок (мес.):</b> <span th:text="${contract.termMonths}"></span></div>
    <div><b>Ставка (% годовых):</b> <span th:text="${contract.annualRatePercent}"></span></div>
    <div><b>Дата начала:</b> <span th:text="${contract.startDate}"></span></div>
</div>

<div class="section">
    <h3>График платежей</h3>
    <table>
        <thead>
        <tr>
            <th>#</th>
            <th>Дата</th>
            <th>Платёж</th>
            <th>Проценты</th>
            <th>Тело</th>
            <th>Остаток</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="r : ${schedule}">
            <td th:text="${r.paymentNo}"></td>
            <td th:text="${r.dueDate}"></td>
            <td th:text="${r.paymentTotal}"></td>
            <td th:text="${r.paymentInterest}"></td>
            <td th:text="${r.paymentPrincipal}"></td>
            <td th:text="${r.balanceAfter}"></td>
        </tr>
        </tbody>
    </table>
</div>

<div class="sign">
    <div class="line">
        <div>
            Лизингодатель (ООО «Banking») <br/>
            <span class="muted" th:text="${companySignerName}">Петров П.П.</span>
        </div>
    </div>

    <div class="line">
        <div>
            Лизингополучатель <br/>
            <span class="muted" th:text="${app.client != null ? app.client.name : ''}">Клиент</span>
        </div>
    </div>
</div>


<div class="no-print muted">
    Подсказка: Ctrl/Cmd+P → “Сохранить как PDF”.
</div>

<img class="stamp" th:src="@{/img/stamp.svg}" alt="stamp"/>

</body>
</html>

